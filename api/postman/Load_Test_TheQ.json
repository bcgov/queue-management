{
	"info": {
		"_postman_id": "cda6659f-7e26-412f-9a1c-979b54507ea2",
		"name": "Load_Test_TheQ",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Setup",
			"item": [
				{
					"name": "Setup-Variables",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5409b66d-67a4-449b-8633-9aeca632b388",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "e9eed831-7955-4218-a400-ae6e1e7e2e10",
								"exec": [
									"//  See if the use-prefix global has been set.  Use default if not.",
									"let usePrefix = '';",
									"if (pm.globals.get('use-prefix')) {",
									"    console.log(\"==> use-prefix exists\");",
									"    usePrefix = pm.globals.get('use-prefix');",
									"    console.log(\"    --> Prefix is: \" + usePrefix);",
									"    ",
									"    //  Set up all globals, using the correct prefix.",
									"    pm.globals.set('auth_url', pm.globals.get(usePrefix + 'auth_url'));",
									"    pm.globals.set('realm', pm.globals.get(usePrefix + 'realm'));",
									"    pm.globals.set('clientid', pm.globals.get(usePrefix + 'clientid'));",
									"    pm.globals.set('client_secret', pm.globals.get(usePrefix + 'client_secret'));",
									"    pm.globals.set('url', pm.globals.get(usePrefix + 'url'));",
									"}",
									"else {",
									"    console.log(\"==> use-prefix does not exist\");",
									"    console.log(\"    --> No default globals set.\");",
									"}",
									"",
									"//  If no maximum load time defined, set a default.",
									"if (!pm.globals.get('max_load_time')) {",
									"    console.log(\"==> max_load_time not present, default set.\");",
									"    pm.globals.set(\"max_load_time\", JSON.stringify(1503));",
									"}",
									"",
									"//  If no maximum response defined, set a default.",
									"if (!pm.globals.get('max_response_time')) {",
									"    console.log(\"==> max_response_time not present, default set.\");",
									"    pm.globals.set(\"max_response_time\", JSON.stringify(15005));",
									"}",
									"",
									"//  Display the values of all globals.",
									"console.log(\"\");",
									"console.log(\"==> Globals are:\");",
									"console.log(\"    --> auth_url:          \" + pm.globals.get(\"auth_url\"));",
									"console.log(\"    --> realm:             \" + pm.globals.get(\"realm\"));",
									"console.log(\"    --> clientid:          \" + pm.globals.get(\"clientid\"));",
									"console.log(\"    --> client_secret:     \" + pm.globals.get(\"client_secret\"));",
									"console.log(\"    --> url:               \" + pm.globals.get(\"url\"));",
									"console.log(\"    --> max_load_time:     \" + pm.globals.get(\"max_load_time\"));",
									"console.log(\"    --> max_response_time: \" + pm.globals.get(\"max_response_time\"));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// Dummy data."
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Auth-First",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5409b66d-67a4-449b-8633-9aeca632b388",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_first\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = globals.auth_url;\nrealm = globals.realm;\nclientid = globals.clientid;\nuserid = globals.userid;\npassword = globals.password;\nclient_secret = globals.client_secret;\n\nconst echoPostRequest = {\n  url: auth_url + '/auth/realms/' + realm + '/protocol/openid-connect/token',\n  method: 'POST',\n  header: 'Content-Type:application/x-www-form-urlencoded',\n  body: {\n    mode: 'raw',\n    raw: 'grant_type=password&client_id=' + clientid \n          + '&username=' + userid \n          + '&password=' + password\n          + '&client_secret=' + client_secret\n  }\n};\npm.sendRequest(echoPostRequest, function (err, res) {\n    var jsonData = res.json();\n    if (jsonData.hasOwnProperty('access_token')) {\n    \tpm.globals.set(\"token\", jsonData.access_token);\n\t    pm.globals.set(\"refresh_token\", jsonData.refresh_token);\n\t    if (err) {\n\t        console.log(err);\n\t    }\n\t    // console.log(err ? err : res.json());\n\t} else {\n\t    pm.globals.set(\"token\", 0);\n\t    pm.globals.set(\"refresh_token\", 0);\n\t    pm.globals.set(\"token_expires\", 0);\n\t    pm.globals.set(\"refresh_token_expires\", 0);\n\t}\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Auth-Script",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f386cf22-bb0f-47d9-9c22-cda162ed4375",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"auth_script\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "auth_url = globals.auth_url;\nrealm = globals.realm;\nclientid = globals.clientid;\nuserid = globals.userid;\npassword = globals.password;\nclient_secret = globals.client_secret;\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Basic-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a0d8e240-3b40-4654-a32b-bf2e676fdeb9",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"basic_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Get the maximum response time allowed.\r\nmax_response_time = JSON.parse(globals.max_response_time);\r\n\r\n//  Check to make sure the response time was within the maximum allowed.\r\npm.test('Response time less than ' + max_response_time.toString() + 'ms', function(){\r\n    pm.expect(pm.response.responseTime).to.be.below(max_response_time);\r\n});\r\n\r\n//  Other tests.\r\npm.test(\"Response code for request is 200\", function(){\r\n    pm.response.to.have.status(200);\r\n});\r\npm.test('Response header should have Content-Type of application/json', function() {\r\n    pm.response.to.have.header('content-type', 'application/json');\r\n});\r\npm.test('Response body be in JSON format', function() {\r\n    pm.response.to.be.json; \r\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Complex-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f006b951-3205-4f21-a315-369f85591929",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"complex_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Get the maximum response time allowed.\nmax_response_time = JSON.parse(globals.max_response_time);\n\n//  Check to make sure the response time was within the maximum allowed.\npm.test('Response time less than ' + max_response_time.toString() + 'ms', function(){\n    pm.expect(pm.response.responseTime).to.be.below(max_response_time);\n});\n\n//  Other tests.\npm.test(\"Response code for request is 200\", function(){\n    pm.response.to.have.status(200);\n});\npm.test('Response header should have Content-Type of application/json', function() {\n    pm.response.to.have.header('content-type', 'application/json');\n});\npm.test('Response body be in JSON format', function() {\n    pm.response.to.be.json; \n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Create-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "382b7b65-d736-4a03-a44a-3891f33b617d",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"create_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Get the maximum response time allowed.\nmax_response_time = JSON.parse(globals.max_response_time);\n\n//  Check to make sure the response time was within the maximum allowed.\npm.test('Response time less than ' + max_response_time.toString() + 'ms', function(){\n    pm.expect(pm.response.responseTime).to.be.below(max_response_time);\n});\n\n//  Other tests.\npm.test(\"Response status code should be 201 CREATED\", function(){\n    pm.response.to.have.status(201);\n});\npm.test('Response header should have Content-Type of application/json', function() {\n    pm.response.to.have.header('content-type', 'application/json');\n});\npm.test('Response body be in JSON format', function() {\n    pm.response.to.be.json; \n});\n"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Citizen-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8cebcf78-f5a2-4694-b108-60e146791a78",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"citizen_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "var schema = {\n    \"properties\" : {\n        \"start_time\" : {\n            \"type\" : \"string\"\n        },\n        \"citizen_name\" : {\n            \"type\" : [\"string\", \"null\"]\n        },\n        \"citizen_id\" : {\n            \"type\" : [\"number\", \"object\"]\n        },\n        \"qt_xn_citizen_ind\" : {\n            \"type\" : \"number\"\n        },\n        \"ticket_number\" : {\n            \"type\" : [\"string\", \"null\"]\n        },\n        \"service_reqs\" : {\n            \"type\" : \"array\"\n        },\n        \"office_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"cs\" : {\n            \"type\" : \"object\"\n        },\n        \"citizen_comments\" : {\n            \"type\" : [\"string\", \"null\"]\n        },\n        \n    },\n    \"required\" : [\"start_time\", \"citizen_name\", \"citizen_id\",\n                  \"qt_xn_citizen_ind\", \"ticket_number\", \"service_reqs\",\n                  \"office_id\", \"cs\", \"citizen_comments\"]\n};\n\n//  Declare, initialize variables.\nvar allElements = null;\n\nif (jsonData.hasOwnProperty(\"citizens\")) {\n\tallElements = jsonData.citizens;\n};\n\nif (jsonData.hasOwnProperty(\"citizen\")) {\n\tallElements = [];\n\tallElements.push(jsonData.citizen);\n};\n\nvar elementCount = 0;\n\n//  If there are some citizens, proceed with tests.\nif (allElements !== null) {\n\n    //  Loop to validate schema of each channel, create list of citizen ids.\n    allElements.forEach(function(element) {\n        elementCount ++;\n        var testTitle = \"Citizen (\" + elementCount + \"): \" + element.citizen_id + \" - \";\n        tests[testTitle + \"conforms to schema\"] = tv4.validate(element, schema);\n        \n        //  Test the authenticate response.\n        pm.test(testTitle + \"qt_xn_citizen_ind must be 0 or 1\", function() {\n            pm.expect(element.qt_xn_citizen_ind).to.be.within(0,1);\n        });\n    });\n};"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Service-Response-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0e6c4264-28b3-4a49-b6bb-1199aef2cb13",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"service_response_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "var schema = {\n    \"properties\" : {\n        \"sr_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"sr_state\" : {\n            \"type\" : \"object\"\n        },\n        \"periods\" : {\n            \"type\" : \"array\"\n        },\n        \"service\" : {\n            \"type\" : \"object\"\n        },\n        \"citizen\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"quantity\" : {\n            \"type\" : \"number\"\n        },\n        \"service_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"citizen_id\" : {\n            \"type\" : [\"object\", \"number\"]\n        },\n        \"channel\" : {\n        \t\"type\" : \"object\"\n        },\n        \"channel_id\" : {\n        \t\"type\" : [\"object\", \"number\"]\n        }\n        \n    },\n    \"required\" : [\n    \t\"sr_id\", \"sr_state\", \"periods\", \"service\", \"citizen\", \"quantity\",\n    \t\"service_id\", \"citizen_id\", \"channel\", \"channel_id\"\n    ]\n};\n\n//  Declare, initialize variables.\nvar allElements = null;\n\nif (jsonData.hasOwnProperty(\"service_requests\")) {\n\tallElements = jsonData.service_requests;\n};\n\nif (jsonData.hasOwnProperty(\"service_request\")) {\n    allElements = [];\n\tallElements.push(jsonData.service_request);\n}\n\nvar elementCount = 0;\n\n//  If there are some service requests, proceed with tests.\nif (allElements !== null) {\n\n    //  Loop to validate schema of each service request.\n    allElements.forEach(function(element) {\n        elementCount ++;\n        var testTitle = \"Service Request (\" + elementCount + \"): \" + element.sr_id + \" - \";\n        tests[testTitle + \"conforms to schema\"] = tv4.validate(element, schema);\n    });\n};"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				},
				{
					"name": "CFMS-Install-Get-Active-Citizens-Tests",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8856712d-73ca-4172-89ba-590e8b015c6b",
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"get_active_citizens_test\", jsonData.data);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "//  Declare and initialize variables.\nvar elementCount = 0;\nvar srCount = 0;\nvar isFirstCitizen = true;\n\n\n//  Loop to create list of active citizen ids.\nallElements.forEach(function(element) {\n    srCount = element.service_reqs.length;\n\n    //  If citizen active, add to the list.\n    if (element.cs.cs_state_name === \"Active\") {\n        //console.log(\"Citizen (\" + elementCount + \") \" + element.citizen_id +\n        //    \" Active: SRCount = \" + srCount);\n        citizenIds.push(element.citizen_id);\n\n        //  Save the first citizen.\n        if (isFirstCitizen) {\n            currentCitizen = element;\n            isFirstCitizen = false;\n        }\n    }\n        \n    //  Increment count.\n    elementCount++;\n});"
						},
						"url": {
							"raw": "https://postman-echo.com/post",
							"protocol": "https",
							"host": [
								"postman-echo",
								"com"
							],
							"path": [
								"post"
							]
						},
						"description": "Sets the authentication script"
					},
					"response": []
				}
			],
			"description": "This folder performs basic authentication features.",
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check app health",
			"item": [
				{
					"name": "Check healthz driver TheQ",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "74adc5ce-caa5-452a-bd96-8ac90a4c11d7",
								"exec": [
									"//  Get the maximum response time allowed.",
									"max_load_time = JSON.parse(globals.max_load_time);",
									"",
									"//  Set health response time variable.",
									"health_tries = 15;",
									"counter = 1;",
									"postman.setEnvironmentVariable(\"health_tries\", JSON.stringify(health_tries));",
									"postman.setEnvironmentVariable(\"health_counter\", JSON.stringify(counter));",
									"",
									"//  Get the response.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Health Driver: Try \" + counter.toString() + \": Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is healthy'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is healthy');",
									"});",
									"",
									"//  If response time is OK, proceed to the next test.",
									"if (pm.response.responseTime < max_load_time) {",
									"    postman.setNextRequest(\"Check the readyz endpoint TheQ\");",
									"}",
									"    ",
									"//  Response time is too long.  Try again, give pod a chance to spin up.",
									"else {",
									"    postman.setNextRequest(\"Check the healthz endpoint TheQ\");",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e00b481-ef9a-440b-8e83-025fc49026c4",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}healthz/",
							"host": [
								"{{url}}healthz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Check the healthz endpoint TheQ",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "74adc5ce-caa5-452a-bd96-8ac90a4c11d7",
								"exec": [
									"//  Get the maximum load time allowed.",
									"max_load_time = JSON.parse(postman.getEnvironmentVariable(\"max_load_time\"));",
									"",
									"//  Get and update variables.",
									"health_tries = JSON.parse(postman.getEnvironmentVariable(\"health_tries\"));",
									"counter = JSON.parse(postman.getEnvironmentVariable(\"health_counter\")) + 1;",
									"postman.setEnvironmentVariable(\"health_counter\", JSON.stringify(counter));",
									"",
									"//  Get the response.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Health Driver: Try \" + counter.toString() + \": Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is healthy'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is healthy');",
									"});",
									"",
									"//  If response time is OK, proceed to the next test.",
									"if (pm.response.responseTime < max_load_time) {",
									"    postman.setNextRequest(\"Check the readyz endpoint TheQ\");",
									"}",
									"    ",
									"//  Response time is too long.",
									"else {",
									"    ",
									"    //  You haven't reached your maximum tries yet.  Try again.",
									"    if (counter < health_tries) {",
									"        postman.setNextRequest(\"Check the healthz endpoint\");",
									"    }",
									"    ",
									"    //   You have reached the maximum.  An error, go to next test.",
									"    else {",
									"        pm.test(\"Response should be below \" + max_load_time.toString() + ' in ' + health_tries.toString() + ' tries.', function() {",
									"            pm.expect(counter).to.be.below(health_tries);",
									"        });",
									"        postman.setNextRequest(\"Check the readyz endpoint TheQ\");",
									"    }",
									"}",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e00b481-ef9a-440b-8e83-025fc49026c4",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}healthz/",
							"host": [
								"{{url}}healthz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Check the readyz endpoint TheQ",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "661c33c4-4a3d-4396-a549-9969edafbfa6",
								"exec": [
									"//  Perform the standard tests.",
									"eval(environment.basic_response_test);",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Test the health response.",
									"pm.test(\"Response should have 'message' property\", function() {",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"pm.test(\"Response message should be 'api is ready'\", function() {",
									"    pm.expect(jsonData.message).to.be.eql('api is ready');",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e00b481-ef9a-440b-8e83-025fc49026c4",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}readyz/",
							"host": [
								"{{url}}readyz"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				}
			],
			"description": "Checks the application health by calling the healthz and readyz endpoints",
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check user login",
			"item": [
				{
					"name": "Authenticate default QTxn user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "43df8e47-2b93-48b0-a5ff-bb3396d12537",
								"exec": [
									"//  Do the basic checks.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get the response.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to make sure that the access token field is not null",
									"pm.test(\"Access Token is not null\", function(){",
									"    var access_token = jsonData.access_token;",
									"    pm.expect(access_token).not.eql(null);",
									"});",
									"",
									"//Test to make sure that the refresh token response field is not null",
									"pm.test(\"Refresh Token is not null\", function(){",
									"    var refresh_token = jsonData.refresh_token;",
									"    pm.expect(refresh_token).not.eql(null);",
									"});",
									"",
									"//Test to make sure that expires in response field is not nullf",
									"pm.test(\"Expires In is not null\", function(){",
									"    var expires_in = jsonData.expires_in;",
									"    pm.expect(expires_in).not.eql(null);",
									"});",
									"",
									"//Test to make sure that refresh expires in response fiels is not null",
									"pm.test(\"Refresh Expires In is not null\", function(){",
									"    var refresh_expires_in = jsonData.refresh_expires_in;",
									"    pm.expect(refresh_expires_in).not.eql(null);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "grant_type=password&client_id={{clientid}}&username={{userid}}&password={{password}}&client_secret={{client_secret}}"
						},
						"url": {
							"raw": "{{auth_url}}/auth/realms/{{realm}}/protocol/openid-connect/token?Content-Type=application/x-www-form-urlencoded",
							"host": [
								"{{auth_url}}"
							],
							"path": [
								"auth",
								"realms",
								"{{realm}}",
								"protocol",
								"openid-connect",
								"token"
							],
							"query": [
								{
									"key": "Content-Type",
									"value": "application/x-www-form-urlencoded"
								}
							]
						},
						"description": "Make sure the operator ID can log in"
					},
					"response": []
				},
				{
					"name": "Who am I TheQ",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "c34723d3-c0d1-4504-97a2-373088309a5b",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e77f0ca3-62cf-49ba-8e17-67a16e8f8a5f",
								"exec": [
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"if (jsonData.hasOwnProperty(\"csr\")) {",
									"\tcurrentOfficeId = jsonData.csr.office_id;",
									"\tcurrentOfficeNumber = jsonData.csr.office.office_number;",
									"\tcurrentCsrId = jsonData.csr.csr_id;",
									"    postman.setEnvironmentVariable(\"current_office_id\", currentOfficeId);",
									"    postman.setEnvironmentVariable(\"current_office_number\", currentOfficeNumber);",
									"    postman.setEnvironmentVariable(\"current_csr_id\", currentCsrId);",
									"};",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}csrs/me/",
							"host": [
								"{{url}}csrs"
							],
							"path": [
								"me",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check channels",
			"item": [
				{
					"name": "Get channels",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "2b71673c-4aa2-47b3-8594-15f02b390ee0",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "42742c4c-505d-472d-857b-fdba74cc49ac",
								"exec": [
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"properties\" : {",
									"        \"channel_name\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"channel_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        }",
									"    },",
									"    \"required\" : [\"channel_name\", \"channel_id\"]",
									"};",
									"",
									"//  Loop to validate schema of each channel.",
									"var allChannels = jsonData.channels;",
									"var channelCount = 0;",
									"var phoneId = 0;",
									"var emailId = 0;",
									"var phoneText = \"Phone\";",
									"var emailText = \"Email/Fax/Mail\";",
									"allChannels.forEach(function(channel) {",
									"    channelCount ++;",
									"    var testTitle = \"Channel (\" + channelCount + \"): ID \" + channel.channel_id + \" Name \" + channel.channel_name + \" conforms to schema\";",
									"    tests[testTitle] = tv4.validate(channel, schema);",
									"    if (channel.channel_name === phoneText) {",
									"        phoneId = channel.channel_id;",
									"    }",
									"    if (channel.channel_name === emailText) {",
									"        emailId = channel.channel_id;",
									"    }",
									"});",
									"",
									"//  Check that you found the phone ID.",
									"pm.test(phoneText + ' id was ' + phoneId.toString() + ' (should not equal 0)', function() {",
									"    pm.expect(phoneId).to.not.be.eql(0);",
									"});",
									"",
									"//  Check that you found the email ID.",
									"pm.test(emailText + ' id was ' + emailId.toString() + ' (should not equal 0)', function() {",
									"    pm.expect(emailId).to.not.be.eql(0);",
									"});",
									"",
									"//  Store this ID for future use.",
									"postman.setEnvironmentVariable(\"channel_telephone_id\", JSON.stringify(phoneId));",
									"postman.setEnvironmentVariable(\"channel_email_id\", JSON.stringify(emailId));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}channels/",
							"host": [
								"{{url}}channels"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check counters",
			"item": [
				{
					"name": "Store CSR and Office Info",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "c34723d3-c0d1-4504-97a2-373088309a5b",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e77f0ca3-62cf-49ba-8e17-67a16e8f8a5f",
								"exec": [
									"// Define the JSON Schema expected in response",
									"var CSRSSchema = {",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"csr_id\": {\"type\": \"number\"},",
									"        \"csr_state\": {",
									"            \"type\": \"object\",",
									"            \"properties\": {",
									"                \"csr_state_desc\": {\"type\": \"string\"},",
									"                \"csr_state_id\": {\"type\": \"number\"},",
									"                \"csr_state_name\": {\"type\": \"string\"}",
									"            },",
									"            \"required\": [\"csr_state_desc\", \"csr_state_id\", \"csr_state_name\"]",
									"        },",
									"        \"csr_state_id\": {\"type\": \"number\"},",
									"        \"deleted\": {},",
									"        \"finance_designate\": {\"type\": \"number\"},",
									"        \"office_manager\": {\"type\": \"number\"},",
									"        \"ita2_designate\": {\"type\": \"number\"},",
									"        \"office\": {",
									"            \"type\": \"object\",",
									"            \"properties\": {",
									"                \"appointments_enabled_ind\": {\"type\": \"number\"},",
									"                \"exams_enabled_ind\": {\"type\": \"number\"},",
									"                \"office_id\": {\"type\": \"number\"},",
									"                \"office_name\": {\"type\": \"string\"},",
									"                \"office_number\": {\"type\": \"number\"},",
									"                \"sb\":{",
									"                    \"type\": \"object\",",
									"                    \"properties\": {",
									"                        \"sb_id\": {\"type\": \"number\"},",
									"                        \"sb_type\": {\"type\": \"string\"}",
									"                    },",
									"                    \"required\": [\"sb_id\", \"sb_type\"]",
									"                }",
									"            },",
									"            \"required\": [\"appointments_enabled_ind\", \"exams_enabled_ind\", \"office_id\", \"office_name\", \"office_number\", \"sb\"]",
									"        },",
									"        \"office_name\": {\"type\": \"string\"},",
									"        \"pesticide_designate\": {\"type\": \"number\"},",
									"        \"qt_xn_csr_ind\": {\"type\": \"number\"},",
									"        \"receptionist_ind\": {\"type\": \"number\"},",
									"        \"role\": {",
									"            \"type\": \"object\",",
									"            \"properties\": {",
									"                \"role_code\": {\"type\": \"string\"},",
									"                \"role_desc\": {\"type\": \"string\"},",
									"                \"role_id\": {\"type\": \"number\"}",
									"            },",
									"            \"required\": [\"role_code\", \"role_desc\", \"role_id\"]",
									"        },",
									"        \"role_id\": {\"type\": \"number\"},",
									"        \"username\": {\"type\": \"string\"}",
									"    },",
									"    \"attention_needed\": {\"type\": \"boolean\"},",
									"    \"required\": [\"csr\", \"attention_needed\"]",
									"};",
									"",
									"//  Run basic response tests.",
									"eval(environment.basic_response_test);",
									"",
									"// Parse response body",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//Test to see if response schema is valid",
									"pm.test(\"Validate Response CSRs Schema\", function(){",
									"    pm.expect(tv4.validate(jsonData, CSRSSchema)).to.be.true;",
									"});",
									"",
									"//  Make sure that jsonData has an csr property.",
									"pm.test(\"Response should have csr property\", function(){",
									"    pm.expect(jsonData.hasOwnProperty(\"csr\")).to.be.true;",
									"});",
									"",
									"var csr = 0;",
									"var office = 0;",
									"var counters = 0;",
									"var counter_text = \"Counter\";",
									"var counter_id = 0;",
									"var qtxn_text = \"Quick Trans\";",
									"var qtxn_id = 0;",
									"",
									"if (jsonData.hasOwnProperty(\"csr\")) {",
									"\tcurrentOfficeId = jsonData.csr.office_id;",
									"\tcurrentOfficeNumber = jsonData.csr.office.office_number;",
									"    postman.setEnvironmentVariable(\"current_office_id\", currentOfficeId);",
									"    postman.setEnvironmentVariable(\"current_office_number\", currentOfficeNumber);",
									"    postman.setEnvironmentVariable(\"current_csr_id\", jsonData.csr.csr_id);",
									"    ",
									"    csr = jsonData.csr;",
									"    counter_id = 0;",
									"    qtxn_id = 0;",
									"",
									"    //  Make sure that jsonData has an booking property.",
									"    pm.test(\"CSR should have office property\", function(){",
									"        pm.expect(csr.hasOwnProperty(\"office\")).to.be.true;",
									"    });",
									"    ",
									"    //  Make sure office has counter property.",
									"    if (csr.hasOwnProperty(\"office\")) {",
									"        office = csr.office;",
									"        ",
									"        //  Make sure that jsonData has an booking property.",
									"        pm.test(\"Office should have counters property\", function(){",
									"            pm.expect(office.hasOwnProperty(\"counters\")).to.be.true;",
									"        });",
									"",
									"        //  Make sure office has counter property.",
									"        if (office.hasOwnProperty(\"counters\")) {",
									"            counters = office.counters;",
									"            ",
									"            //  Search for Counter and Quick Trans counters",
									"            counters.forEach(function(counter) {",
									"                if (counter.counter_name === counter_text) {",
									"                    counter_id = counter.counter_id;",
									"                }",
									"                if (counter.counter_name === qtxn_text) {",
									"                    qtxn_id = counter.counter_id;",
									"                }",
									"            });",
									"            ",
									"            //  Make sure you found the right IDs.",
									"            pm.test(\"Counter ID (\" + counter_id.toString() + \") should not be 0\", function(){",
									"                pm.expect(counter_id).to.not.be.eql(0);",
									"            });",
									"            pm.test(\"Quick Transaction ID (\" + qtxn_id.toString() + \") should not be 0\", function(){",
									"                pm.expect(qtxn_id).to.not.be.eql(0);",
									"            });",
									"            ",
									"            //  Store the ids for future use.",
									"            // postman.setEnvironmentVariable(\"counter_id\", counter_id);",
									"            // postman.setEnvironmentVariable(\"qtxn_id\", qtxn_id);",
									"            postman.setEnvironmentVariable(\"counter_id\", JSON.stringify(counter_id.toString()));",
									"            postman.setEnvironmentVariable(\"qtxn_id\", JSON.stringify(qtxn_id.toString()));",
									"        }",
									"",
									"        ",
									"    }",
									"",
									"}",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}csrs/me/",
							"host": [
								"{{url}}csrs"
							],
							"path": [
								"me",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check categories",
			"item": [
				{
					"name": "Get categories",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "e99f23ee-5a03-43d9-9075-75dbf06aadcc",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1a9c9ff5-8475-4dd2-a6c7-ffb5d4689145",
								"exec": [
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"properties\" : {",
									"        \"display_dashboard_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"deleted\" : {",
									"            \"type\" : [\"object\", \"null\"]",
									"        },",
									"        \"actual_service_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"service_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"service_code\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"prefix\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"service_name\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"parent_id\" : {",
									"            \"type\" : [\"object\", \"null\" ]",
									"        },",
									"        \"service_desc\" : {",
									"            \"type\" : \"string\"",
									"        }",
									"    },",
									"    \"required\" : [\"display_dashboard_ind\", \"deleted\", \"actual_service_ind\", \"service_id\", \"service_code\",",
									"                  \"prefix\", \"service_name\", \"parent_id\", \"service_desc\"]",
									"};",
									"",
									"//  Loop to validate schema of each channel.",
									"var allCategories = jsonData.categories;",
									"var categoryCount = 0;",
									"allCategories.forEach(function(category) {",
									"    categoryCount ++;",
									"    var testTitle = \"Category (\" + categoryCount + \"): \" + category.service_name + \" - \";",
									"    tests[testTitle + \"conforms to schema\"] = tv4.validate(category, schema);",
									"    var displayInd = category.display_dashboard_ind;",
									"    var serviceInd = category.actual_service_ind;",
									"",
									"    //  Test that returned data is valid.",
									"    pm.test(\"--> \" + testTitle + \"display_dashboard_ind must be 0 (is \" + displayInd.toString() + \")\", function(){",
									"        pm.expect(displayInd).to.be.eql(0);",
									"    });",
									"",
									"    pm.test(\"--> \" + testTitle + \"actual_service_ind must be 0 (is \" + serviceInd.toString() + \")\", function(){",
									"        pm.expect(serviceInd).to.be.eql(0);",
									"    });",
									"    ",
									"    pm.test(\"--> \" + testTitle + \"parent_id must be null\", function(){",
									"        pm.expect(category.parent_id).to.be.null;",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}categories/",
							"host": [
								"{{url}}categories"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check services",
			"item": [
				{
					"name": "Get services",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "d01c3826-dc28-4cce-957b-ec70d0393e7e",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_first);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "3b11031e-4031-4569-91f2-49e23517ffee",
								"exec": [
									"//  Run basic tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var schema = {",
									"    \"properties\" : {",
									"        \"display_dashboard_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"deleted\" : {",
									"            \"type\" : [\"object\", \"null\"]",
									"        },",
									"        \"actual_service_ind\" : {",
									"            \"type\" : \"number\"",
									"        },",
									"        \"service_id\" : {",
									"            \"type\" : [\"number\", \"object\"]",
									"        },",
									"        \"service_code\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"prefix\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"service_name\" : {",
									"            \"type\" : \"string\"",
									"        },",
									"        \"parent_id\" : {",
									"            \"type\" : [\"object\", \"number\", \"null\" ]",
									"        },",
									"        \"service_desc\" : {",
									"            \"type\" : \"string\"",
									"        }",
									"    },",
									"    \"required\" : [\"display_dashboard_ind\", \"deleted\", \"actual_service_ind\", \"service_id\", \"service_code\",",
									"                  \"prefix\", \"service_name\", \"parent_id\", \"service_desc\"]",
									"};",
									"",
									"//  Loop to validate schema of each channel.",
									"var allElements = jsonData.services;",
									"var elementCount = 0;",
									"var elementMax = Math.min(10, allElements.length);",
									"//allElements.forEach(function(element) {",
									"for (var currentElement = 0; currentElement < elementMax; currentElement++) {",
									"    element = allElements[currentElement];",
									"    elementCount ++;",
									"    var testTitle = \"Service (\" + elementCount + \"): \" + element.service_name + \" - \";",
									"    tests[testTitle + \"conforms to schema\"] = tv4.validate(element, schema);",
									"    displayInd = element.display_dashboard_ind;",
									"    serviceInd = element.actual_service_ind;",
									"",
									"    //  Test that returned data is valid.",
									"    pm.test(\"--> \" + testTitle + \"display_dashboard_ind must be 0 or 1 (is \" + displayInd.toString() + \")\", function(){",
									"        pm.expect(displayInd).to.be.within(0, 1);",
									"    });",
									"",
									"    //  Test that returned data is valid.",
									"    pm.test(\"--> \" + testTitle + \"actual_service_ind must be 1 (is \" + serviceInd.toString() + \")\", function(){",
									"        pm.expect(serviceInd).to.be.eql(1);",
									"    });",
									"    ",
									"    //  Test that returned data is valid.",
									"    pm.test(\"--> \" + testTitle + \"parent_id must not be null\", function(){",
									"        pm.expect(element.parent_id).to.not.be.null;",
									"    });",
									"}",
									"",
									"//  Declare and initialize variables.",
									"var mspId = 0;",
									"var taxId = 0;",
									"var mspText = \"Payment - MSP\";",
									"var propTaxText = \"Other - PTAX\";",
									"",
									"//  Look for the MSP and Property Tax IDs.",
									"allElements.forEach(function(element) {",
									"    if (element.service_name === mspText) {",
									"        mspId = element.service_id;",
									"    }",
									"    if (element.service_name === propTaxText) {",
									"        taxId = element.service_id;",
									"    }",
									"});",
									"",
									"//  Check that you found the MSP service.",
									"pm.test(mspText + ' id was ' + mspId.toString() + ' (should not equal 0)', function() {",
									"    pm.expect(mspId).to.not.be.eql(0);",
									"});",
									"",
									"//  Check that you found the Property Tax service.",
									"pm.test(propTaxText + ' id was ' + taxId.toString() + ' (should not equal 0)', function() {",
									"    pm.expect(taxId).to.not.be.eql(0);",
									"});",
									"",
									"//  Store these IDs for future use.",
									"postman.setEnvironmentVariable(\"service_MSP_id\", JSON.stringify(mspId));",
									"postman.setEnvironmentVariable(\"service_PropTax_id\", JSON.stringify(taxId));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{url}}services/",
							"host": [
								"{{url}}services"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check citizen through queue (QT1)",
			"item": [
				{
					"name": "Create citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "7896261d-7d88-4eba-860b-98472655c4a7",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"    ",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Edit specific citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "b72e7756-5de1-4a13-9609-8917ea63dee7",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "73110fdd-6476-403d-b6c9-c108032fbd66",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Must be one active citizen in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add property tax via phone service request (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "List specific citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "66ca9683-be00-478b-92c0-6ac698d9088b",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have one period', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period channel must be ' + citizenChannel, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].channel_id).to.be.eql(citizenChannel);",
									"    });",
									"    pm.test('Service request period state must be \"Ticket Creation\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods[0].ps.ps_name).to.be.eql(\"Ticket Creation\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add citizen to queue (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8a294876-edfa-4d5b-ada4-399f5339cd8f",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Pending\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Pending\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Waiting\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Waiting\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Invite specific citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8e9cd1ef-a5d9-4f81-b061-f818d4fc5603",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 3 (now three periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(3);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Invited\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Invited\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/invite/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"invite",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Begin serving citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1b1f7f66-04cd-4f10-bfa2-c4f3fffe8715",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 4 (now four periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(4);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Being Served\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Being Served\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Finish serving citizen (QT1)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "818713b9-18a0-4fef-9c16-f71b43dd2ad0",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be no active citizens in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Complete\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Complete\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 4 (still four periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(4);",
									"    });",
									"    pm.test('There must be no open periods', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check citizen begin-hold-finish (QT2)",
			"item": [
				{
					"name": "Create citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e77d15de-91e2-4528-87bd-5734405b4def",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"    ",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}    ",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Edit specific citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "ce732be5-38a3-4825-90d1-4d52babf8917",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// }",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "13828662-748d-4b3f-9ead-454e795f1f01",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Must be one active citizen in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add property tax via phone service request (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "List specific citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2a57d1b2-9d0c-4e07-ad20-d4dde457f9d1",
								"exec": [
									"//  Install postmanBDD, json-bigint parse and stringify.",
									"eval(globals.postmanBDD);",
									"eval(globals.json_bigint_parse);",
									"",
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have one period', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period channel must be ' + citizenChannel, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].channel_id).to.be.eql(citizenChannel);",
									"    });",
									"    pm.test('Service request period state must be \"Ticket Creation\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods[0].ps.ps_name).to.be.eql(\"Ticket Creation\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Begin serving citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "4550a6b7-560d-48bf-bfc9-41453a8defec",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Being Served\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Being Served\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Place citizen on hold (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "dd51a48d-2e1e-47fd-978f-507b77a7901f",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 3 (now three periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(3);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"On hold\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"On hold\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/place_on_hold/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"place_on_hold",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Get service requests (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "f4809d17-b59d-47fc-861e-5edaf421bddc",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.service_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get periods for the first service request.",
									"    var allPeriods = allElements[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    var allPeriodCount = 0;",
									"",
									"    //  Find how many periods there are with null end time.",
									"    //  Also, check schema.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        ",
									"        //  Find the open period.",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"        ",
									"    });",
									"}    ",
									"",
									"//  If there are some service requests, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Perform tests.",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(allElements.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(allElements[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(allElements[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(allElements[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have three periods', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(3);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period state must be \"On hold\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"On hold\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/service_requests/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"service_requests",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Call citizen from hold (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "66563797-2a92-4dbd-946e-7232dcac8260",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 4 (now four periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(4);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Being Served\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Being Served\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Finish serving citizen (QT2)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "ec865f9c-a4b6-421f-956e-783972df2ad3",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"    ",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = allElements[0].service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be no active citizens in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Complete\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Complete\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 4 (still four periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(4);",
									"    });",
									"    pm.test('There must be no open periods', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check citizen leave after create (QT3)",
			"item": [
				{
					"name": "Create citizen (QT3)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "061a479c-37b4-4707-b8c6-c31cacadecec",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Citizen left (QT3)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "16eaefc2-0d16-405e-9e70-e85314da841b",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"    var citizenComment = postman.getEnvironmentVariable(\"citizen_comment\");",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = null;",
									"    if (currentCitizen.service_reqs.length !== 0) {",
									"        var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    }",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    if (allPeriods !== null) {",
									"        allPeriods.forEach(function(onePeriod) {",
									"            if (!onePeriod.time_end) {",
									"                openPeriod = onePeriod;",
									"                openPeriodCount++;",
									"            }",
									"        });",
									"    }",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Must be no active citizens in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check citizen leave after waiting (QT4)",
			"item": [
				{
					"name": "Create citizen (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fcc1415c-0861-4516-8843-bfc3717a76d9",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Edit specific citizen (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "f26eaedb-5d41-4dcc-b856-aec599440601",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// }",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e0b48324-0ca2-4b2e-88ef-cbfbe10b5fb7",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"     pm.test(\"Must be one active citizen in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add property tax via phone service request (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "List specific citizen (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1176fcca-52ff-4e13-b4a4-775ad324a4c6",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have one period', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period channel must be ' + citizenChannel, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].channel_id).to.be.eql(citizenChannel);",
									"    });",
									"    pm.test('Service request period state must be \"Ticket Creation\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods[0].ps.ps_name).to.be.eql(\"Ticket Creation\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add citizen to queue (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "f0aacc69-ff0e-4ed3-9ef7-f131bbf3a5bd",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Pending\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Pending\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Waiting\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Waiting\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/add_to_queue/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"add_to_queue",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Citizen left (QT4)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "4ee90115-54c2-4b44-b6f1-d739e8a385b1",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Must be no active citizens in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test(\"Citizen should have one service request\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Complete\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Complete\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must be no open periods', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/citizen_left/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"citizen_left",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Check update service information (QT5)",
			"item": [
				{
					"name": "Create citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "d3bbd88a-25fd-4fe6-ae7e-359373df02ac",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"",
									"    //  Perform tests.",
									"    pm.test(\"Only one citizen should be in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test(\"Current citizen name should be null\", function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.null;",
									"    });",
									
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"",
									"    //  Store the ID of the citizen just created.",
									"    postman.setEnvironmentVariable(\"current_client\", JSON.stringify(citizenIds.shift()));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{url}}citizens/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Edit specific citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "2be395b2-e14c-4ff8-8753-42ea1fe2010d",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									"",
									"// //  Get data, create JSON body.",
									"// var citizenName = postman.getEnvironmentVariable(\"citizen_name\");",
									"// var citizenComments = postman.getEnvironmentVariable(\"citizen_comment\");",
									"// var bodyData = {",
									"//     \"citizen_name\" : citizenName,",
									"//     \"citizen_comments\" : citizenComments",
									"// };",
									"",
									"// //  Store the data in an environment variable.",
									"// postman.setEnvironmentVariable(\"putBody\", JSON.stringify(bodyData));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "2e7878d3-653e-479e-850f-c454b378217e",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"    ",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"",
									"    //  Perform tests.",
									"     pm.test(\"Must be one active citizen in the office\", function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test(\"Citizen should have no service requests\", function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"citizen_name\" : {{citizen_name}},\n    \"citizen_comments\" : {{citizen_comment}}\n}"
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Add property tax via phone service request (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "fa6f6a3b-e4e7-42b6-a8d3-ecda3840418a",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.create_response_test);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_request\" : {\n\t\t\"service_id\" : {{service_PropTax_id}},\n\t\t\"citizen_id\" : {{current_client}},\n\t\t\"quantity\" : {{citizen_quantity}},\n\t\t\"channel_id\" : {{channel_telephone_id}}\n\t}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "List specific citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "3d906a10-51fe-4329-bac0-e69e6847e852",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"    ",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request must have one period', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request period channel must be ' + citizenChannel, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].channel_id).to.be.eql(citizenChannel);",
									"    });",
									"    pm.test('Service request period state must be \"Ticket Creation\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].periods[0].ps.ps_name).to.be.eql(\"Ticket Creation\");",
									"    });",
									"",
									"    //  Save the service request ID for later.",
									"    var mySRId = allElements[0].service_reqs[0].sr_id;",
									"    postman.setEnvironmentVariable(\"current_sr_id\", JSON.stringify(mySRId));",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Begin serving citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "ff3a25ca-0df2-40f2-b7a1-9e9b4bde2aab",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = null;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Run citizen tests.",
									"    eval(environment.get_active_citizens_test);",
									"    ",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_PropTax_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be one active citizen in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(1);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									"    pm.test('Citizen comment must equal \"' + citizenComment + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_comments).to.be.eql(citizenComment);",
									"    });",
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Active\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Active\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (now two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must only be one open period', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(1);",
									"    });",
									"    pm.test('The open period state must be \"Being Served\"', function() {",
									"        pm.expect(openPeriod.ps.ps_name).to.be.eql(\"Being Served\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "",
								"value": "",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/begin_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"begin_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Update quantity from 3 to 5 (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "153a139d-0daa-4031-ba0a-e7204ade2648",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.service_response_test);",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Only check for an updated quantity.  Get environment variables.",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Updated service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(allElements[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"quantity\" : {{citizen_quantity_update}}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/{{current_sr_id}}/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								"{{current_sr_id}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Update service from PropTax to MSP (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "8faaa693-a7a4-45ed-9318-325a498a98af",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.basic_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.service_response_test);",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Only check for an updated quantity.  Get environment variables.",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"",
									"    //  Perform tests.",
									"    pm.test('Updated service request service must be ' + citizenService, function() {",
									"        pm.expect(allElements[0].service_id).to.be.eql(citizenService);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"service_id\" : {{service_MSP_id}}\n}"
						},
						"url": {
							"raw": "{{url}}service_requests/{{current_sr_id}}/",
							"host": [
								"{{url}}service_requests"
							],
							"path": [
								"{{current_sr_id}}",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				},
				{
					"name": "Finish serving citizen (QT5)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "becda71c-71d6-4d2f-bad5-1a7a17da6128",
								"exec": [
									"//  Ensure the client is logged in.",
									"eval(environment.auth_script);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "7a831dcf-ff2c-4907-95c5-bf042cdd967a",
								"exec": [
									"//  Run complex tests.",
									"eval(environment.complex_response_test);",
									"",
									"//  Get json return data.",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//  Run citizen tests.",
									"eval(environment.citizen_response_test);",
									"",
									"//  Declare, initialize variables.",
									"var citizenIds = [];",
									"var currentCitizen = jsonData.citizen;",
									"",
									"//  If there are some citizens, proceed with tests.",
									"if (allElements !== null) {",
									"",
									"    //  Get environment variables.",
									"    var citizenName = JSON.parse(postman.getEnvironmentVariable(\"citizen_name\"));",
									"    var citizenComment = JSON.parse(postman.getEnvironmentVariable(\"citizen_comment\"));",
									"    var citizenService = JSON.parse(postman.getEnvironmentVariable(\"service_MSP_id\"));",
									"    var citizenQuantity = JSON.parse(postman.getEnvironmentVariable(\"citizen_quantity_update\"));",
									"    var citizenChannel = JSON.parse(postman.getEnvironmentVariable(\"channel_telephone_id\"));",
									"    var currentCitizenId = JSON.parse(postman.getEnvironmentVariable(\"current_client\"));",
									"    var allPeriods = currentCitizen.service_reqs[0].periods;",
									"    var openPeriod = null;",
									"    var openPeriodCount = 0;",
									"    ",
									"    //  Find how many periods there are with null end time.",
									"    allPeriods.forEach(function(onePeriod) {",
									"        if (!onePeriod.time_end) {",
									"            openPeriod = onePeriod;",
									"            openPeriodCount++;",
									"        }",
									"    });",
									"",
									"    //  Perform tests.",
									"    pm.test('Must be no active citizens in the office', function() {",
									"        pm.expect(citizenIds.length).to.be.eql(0);",
									"    });",
									"    pm.test('Citizen Id must equal \"' + currentCitizenId + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_id).to.be.eql(currentCitizenId);",
									"    });",
									"    pm.test('Citizen name must equal \"' + citizenName + '\"', function() {",
									"        pm.expect(currentCitizen.citizen_name).to.be.eql(citizenName);",
									"    });",
									
									"    pm.test('There must be only one service request', function() {",
									"        pm.expect(currentCitizen.service_reqs.length).to.be.eql(1);",
									"    });",
									"    pm.test('Service request state must be \"Complete\"', function() {",
									"        pm.expect(currentCitizen.service_reqs[0].sr_state.sr_code).to.be.eql(\"Complete\");",
									"    });",
									"    pm.test('Service request service must be ' + citizenService, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].service_id).to.be.eql(citizenService);",
									"    });",
									"    pm.test('Service request quantity must be ' + citizenQuantity, function() {",
									"        pm.expect(currentCitizen.service_reqs[0].quantity).to.be.eql(citizenQuantity);",
									"    });",
									"    pm.test('Service request periods length must be 2 (should be two periods)', function() {",
									"        pm.expect(allPeriods.length).to.be.eql(2);",
									"    });",
									"    pm.test('There must be no open periods', function() {",
									"        pm.expect(openPeriodCount).to.be.eql(0);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{url}}citizens/{{current_client}}/finish_service/",
							"host": [
								"{{url}}citizens"
							],
							"path": [
								"{{current_client}}",
								"finish_service",
								""
							]
						},
						"description": "Get a list of clients in the queue"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}